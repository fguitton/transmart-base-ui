<div class="col-sm-3 col-md-2 sidebar" ng-controller="SidebarCtrl">

  <!-- START STUDIES -->
  <accordion close-others="oneAtATime">
    <accordion-group heading=" Highlights" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
      Browse studies by clicking study header below.
    </accordion-group>

    <hr>

    <span><h4>Public studies</h4></span>
    <accordion-group ng-repeat="study in publicStudies" ng-click="getStudyConcepts('{{study._links.self.href}}', '{{study._embedded.ontologyTerm.name}}')">

      <div ng-controller="StudyCtrl">
        <accordion-heading>
          <span ng-click="getTree(study)">{{study._embedded.ontologyTerm.name}}</span>
        </accordion-heading>

        <script type="text/ng-template" id="nodes_renderer.html">
          <div ui-tree-handle class="tree-node tree-node-content">
            <a data-nodrag ng-click="toggle(this)"><span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span></a>
            {{node.title}}
          </div>
          <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
            <li ng-repeat="node in node.nodes" ui-tree-node ng-include="'nodes_renderer.html'">
            </li>
          </ol>
        </script>
        <div ui-tree id="tree-root">
          <ol ui-tree-nodes="" ng-model="tree.nodes[0].nodes">
            <li ng-repeat="node in tree.nodes[0].nodes" ui-tree-node ng-include="'nodes_renderer.html'"></li>
          </ol>
        </div>
      </div>

    </accordion-group>

    <span><h4>Private studies</h4></span>
    <accordion-group ng-repeat="study in privateStudies" ng-click="getStudyConcepts('{{study._links.self.href}}', '{{study._embedded.ontologyTerm.name}}')">

      <div ng-controller="StudyCtrl">
        <accordion-heading>
          <span ng-click="getTree(study)">{{study._embedded.ontologyTerm.name}}</span>
        </accordion-heading>

        <script type="text/ng-template" id="nodes_renderer.html">
          <div ui-tree-handle class="tree-node tree-node-content">
            <a data-nodrag ng-click="toggle(this)"><span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span></a>
            {{node.title}}
          </div>
          <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
            <li ng-repeat="node in node.nodes" ui-tree-node ng-include="'nodes_renderer.html'">
            </li>
          </ol>
        </script>
        <div ui-tree id="tree-root">
          <ol ui-tree-nodes="" ng-model="tree.nodes[0].nodes">
            <li ng-repeat="node in tree.nodes[0].nodes" ui-tree-node ng-include="'nodes_renderer.html'"></li>
          </ol>
        </div>
      </div>

    </accordion-group>


    <hr>

    <accordion-group>
      <accordion-heading>
        Resources
      </accordion-heading>

      <ul>
        <li ng-repeat="endpoint in endpoints"><a href="{{endpoint.url}}" tooltip="{{endpoint.url}}">{{endpoint.title}}</a></li>
      </ul>

      <br>

      <form name="formData.endpointForm" ng-submit="addResource()" role="form">
        <div class="form-group">
          <input type="text" class="form-control input-sm" placeholder="Title" ng-model="formData.title">
        </div>
        <div class="input-group input-group form-group">
          <input type="text" class="form-control input-sm" placeholder="Endpoint url" ng-model="formData.url">
        </div>
        <div class="form-group">
          <input type="text" class="form-control input-sm" placeholder="Request token" ng-model="formData.requestToken">
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Add Resource</button>
        </div>
      </form>
    </accordion-group>
  </accordion>
</div>
  <!--end tree-->
  <br>

</div>
